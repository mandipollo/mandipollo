import React, { useRef } from "react";
import emailjs from "@emailjs/browser";
import { motion, useInView } from "framer-motion";

export const ContactUs = () => {
	const form = useRef<HTMLFormElement | null>(null);
	const connectRef = useRef<SVGPathElement | null>(null);
	const connectInView = useInView(connectRef, { once: true });
	const sendEmail = async (e: React.FormEvent<HTMLFormElement>) => {
		e.preventDefault();
		if (!form.current) return;

		try {
			await emailjs.sendForm(
				"service_tjh6uad",
				"template_h4w6yvg",
				form.current,
				{
					publicKey: "5S7DJhks2VMQmSc0U",
				}
			);

			form.current.reset();
		} catch (err) {
			if (err instanceof Error) {
				console.log(err.message);
			}
		}
	};

	return (
		<section className="flex md:w-1/2 w-full max-w-2xl flex-col  ">
			<motion.svg
				id="connect"
				viewBox="0 0 1000 300"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
				className="w-full h-full "
			>
				<motion.path
					ref={connectRef}
					d="M 102.9 70.8 L 101.7 70.8 L 101.7 21.8 L 102 21.8 L 93.5 21.8 L 93.5 22.3 Q 93.5 22.448 93.637 22.569 A 0.768 0.768 0 0 0 93.75 22.65 A 1.436 1.436 0 0 0 93.861 22.711 Q 94.046 22.8 94.2 22.8 L 101.9 23 L 102 21.8 Q 102.7 21.8 102.7 22.6 L 102.9 32 A 28.581 28.581 0 0 1 109.657 25.091 A 26.975 26.975 0 0 1 111.3 24 Q 116.2 21 122 21 Q 126.534 21 129.742 22.495 A 12.502 12.502 0 0 1 131.05 23.2 A 13.486 13.486 0 0 1 136.108 28.871 A 16.504 16.504 0 0 1 136.4 29.5 Q 138.029 33.21 138.184 38.311 A 35.847 35.847 0 0 1 138.2 39.4 L 138.2 70.8 L 137 70.8 L 137 39.4 A 30.404 30.404 0 0 0 136.626 34.468 Q 136.191 31.829 135.252 29.709 A 14.213 14.213 0 0 0 133.35 26.55 Q 129.7 22 122 22 Q 116.3 22 111.45 25.05 A 27.599 27.599 0 0 0 105.325 30.355 A 34.454 34.454 0 0 0 102.9 33.5 L 102.9 70.8 Z M 161.1 70.8 L 159.9 70.8 L 159.9 21.8 L 160.2 21.8 L 151.7 21.8 L 151.7 22.3 Q 151.7 22.448 151.837 22.569 A 0.768 0.768 0 0 0 151.95 22.65 A 1.436 1.436 0 0 0 152.061 22.711 Q 152.246 22.8 152.4 22.8 L 160.1 23 L 160.2 21.8 Q 160.9 21.8 160.9 22.6 L 161.1 32 A 28.581 28.581 0 0 1 167.857 25.091 A 26.975 26.975 0 0 1 169.5 24 Q 174.4 21 180.2 21 Q 184.734 21 187.942 22.495 A 12.502 12.502 0 0 1 189.25 23.2 A 13.486 13.486 0 0 1 194.308 28.871 A 16.504 16.504 0 0 1 194.6 29.5 Q 196.229 33.21 196.384 38.311 A 35.847 35.847 0 0 1 196.4 39.4 L 196.4 70.8 L 195.2 70.8 L 195.2 39.4 A 30.404 30.404 0 0 0 194.826 34.468 Q 194.391 31.829 193.452 29.709 A 14.213 14.213 0 0 0 191.55 26.55 Q 187.9 22 180.2 22 Q 174.5 22 169.65 25.05 A 27.599 27.599 0 0 0 163.525 30.355 A 34.454 34.454 0 0 0 161.1 33.5 L 161.1 70.8 Z M 250 42.6 L 212.2 42.6 A 11.885 11.885 0 0 0 212.139 43.097 Q 212.115 43.341 212.106 43.555 A 5.739 5.739 0 0 0 212.1 43.8 L 212.1 45.3 A 40.216 40.216 0 0 0 212.733 52.651 Q 213.939 59.138 217.45 63.6 A 17.426 17.426 0 0 0 229.858 70.266 A 25.247 25.247 0 0 0 232.5 70.4 Q 236.6 70.4 239.85 69.3 A 37.084 37.084 0 0 0 242.512 68.29 Q 243.808 67.737 244.905 67.132 A 21.281 21.281 0 0 0 245.4 66.85 Q 247.518 65.607 248.449 65 A 18.143 18.143 0 0 0 248.6 64.9 Q 249.1 64.6 249.4 64.9 L 249.5 65 Q 248.2 66.6 245.5 68.05 A 26.891 26.891 0 0 1 242.03 69.596 A 34.029 34.029 0 0 1 239.35 70.45 Q 235.9 71.4 232.5 71.4 Q 225.7 71.4 220.85 68.15 A 19.912 19.912 0 0 1 214.326 60.822 A 24.737 24.737 0 0 1 213.45 59 A 30.213 30.213 0 0 1 211.388 51.762 A 40.875 40.875 0 0 1 210.9 45.3 A 35.226 35.226 0 0 1 211.487 38.724 A 26.844 26.844 0 0 1 213.4 32.6 A 20.039 20.039 0 0 1 217.672 26.437 A 18.837 18.837 0 0 1 220.7 24.05 A 19.206 19.206 0 0 1 227.671 21.394 A 26.081 26.081 0 0 1 232.3 21 A 20.005 20.005 0 0 1 237.441 21.635 A 16.295 16.295 0 0 1 241.9 23.55 Q 246 26.1 248.3 30.8 A 21.669 21.669 0 0 1 250.095 36.33 Q 250.553 38.756 250.596 41.524 A 37.165 37.165 0 0 1 250.6 42.1 A 0.477 0.477 0 0 1 250.46 42.441 A 0.627 0.627 0 0 1 250.45 42.45 Q 250.3 42.6 250 42.6 Z M 308.8 61.5 L 308.8 24.9 L 300.7 24.9 Q 300.377 24.9 300.217 24.803 A 0.359 0.359 0 0 1 300.15 24.75 A 0.523 0.523 0 0 1 300.041 24.596 A 0.47 0.47 0 0 1 300 24.4 L 300 24.1 L 308.8 23.9 L 309.2 4.2 A 1.452 1.452 0 0 1 309.219 3.954 Q 309.298 3.5 309.7 3.5 L 310 3.5 L 310 23.9 L 326.7 23.9 L 326.7 24.9 L 310 24.9 L 310 61.5 Q 310 64.483 310.946 66.478 A 6.651 6.651 0 0 0 312.25 68.35 Q 314.5 70.6 318 70.6 Q 319.8 70.6 321.75 69.55 Q 323.7 68.5 325.2 67.5 A 23.044 23.044 0 0 1 325.724 67.161 Q 326.775 66.5 327.1 66.5 Q 327.3 66.5 327.5 66.7 L 327.7 66.9 Q 326.3 68.9 323.45 70.25 A 15.09 15.09 0 0 1 320.876 71.208 A 11.159 11.159 0 0 1 318 71.6 A 12.713 12.713 0 0 1 315.263 71.323 Q 312.858 70.793 311.25 69.25 Q 309.464 67.537 308.98 64.203 A 18.867 18.867 0 0 1 308.8 61.5 Z M 34.3 24.3 L 34.3 25 L 33.4 25 Q 30.6 23.5 27.65 22.75 A 24.699 24.699 0 0 0 22.626 22.027 A 28.205 28.205 0 0 0 21.4 22 Q 15 22 10.5 25.05 A 18.965 18.965 0 0 0 4.402 31.906 A 23.327 23.327 0 0 0 3.6 33.55 A 27.462 27.462 0 0 0 1.668 40.216 A 37.733 37.733 0 0 0 1.2 46.3 A 37.518 37.518 0 0 0 1.866 53.58 Q 3.051 59.572 6.35 63.8 Q 11.5 70.4 20.6 70.4 A 24.746 24.746 0 0 0 24.56 70.093 A 21.565 21.565 0 0 0 26.25 69.75 Q 28.9 69.1 31.2 67.85 A 14.8 14.8 0 0 0 34.145 65.769 A 13.24 13.24 0 0 0 35.1 64.8 Q 35.3 64.6 35.55 64.6 A 0.483 0.483 0 0 1 35.689 64.619 A 0.337 0.337 0 0 1 35.9 64.8 L 36.1 65 A 10.323 10.323 0 0 1 34.163 67.07 Q 33.161 67.897 31.856 68.634 A 22.579 22.579 0 0 1 30.15 69.5 A 20.638 20.638 0 0 1 24.513 71.128 A 27.051 27.051 0 0 1 20.6 71.4 A 22.364 22.364 0 0 1 15.1 70.754 A 17.361 17.361 0 0 1 9.5 68.25 A 19.377 19.377 0 0 1 3.445 61.481 A 24.008 24.008 0 0 1 2.45 59.45 A 28.853 28.853 0 0 1 0.469 52.509 A 39.249 39.249 0 0 1 0 46.3 A 38.261 38.261 0 0 1 0.55 39.665 A 28.648 28.648 0 0 1 2.5 33.1 A 21.228 21.228 0 0 1 6.341 27.147 A 19.231 19.231 0 0 1 9.8 24.2 A 18.792 18.792 0 0 1 17.153 21.345 A 25.194 25.194 0 0 1 21.4 21 Q 24.7 21 27.95 21.8 A 26.164 26.164 0 0 1 34.203 24.248 A 28.973 28.973 0 0 1 34.3 24.3 Z M 293.1 24.3 L 293.1 25 L 292.2 25 Q 289.4 23.5 286.45 22.75 A 24.699 24.699 0 0 0 281.426 22.027 A 28.205 28.205 0 0 0 280.2 22 Q 273.8 22 269.3 25.05 A 18.965 18.965 0 0 0 263.202 31.906 A 23.327 23.327 0 0 0 262.4 33.55 A 27.462 27.462 0 0 0 260.468 40.216 A 37.733 37.733 0 0 0 260 46.3 A 37.518 37.518 0 0 0 260.666 53.58 Q 261.851 59.572 265.15 63.8 Q 270.3 70.4 279.4 70.4 A 24.746 24.746 0 0 0 283.36 70.093 A 21.565 21.565 0 0 0 285.05 69.75 Q 287.7 69.1 290 67.85 A 14.8 14.8 0 0 0 292.945 65.769 A 13.24 13.24 0 0 0 293.9 64.8 Q 294.1 64.6 294.35 64.6 A 0.483 0.483 0 0 1 294.489 64.619 A 0.337 0.337 0 0 1 294.7 64.8 L 294.9 65 A 10.323 10.323 0 0 1 292.963 67.07 Q 291.961 67.897 290.656 68.634 A 22.579 22.579 0 0 1 288.95 69.5 A 20.638 20.638 0 0 1 283.313 71.128 A 27.051 27.051 0 0 1 279.4 71.4 A 22.364 22.364 0 0 1 273.9 70.754 A 17.361 17.361 0 0 1 268.3 68.25 A 19.377 19.377 0 0 1 262.245 61.481 A 24.008 24.008 0 0 1 261.25 59.45 A 28.853 28.853 0 0 1 259.269 52.509 A 39.249 39.249 0 0 1 258.8 46.3 A 38.261 38.261 0 0 1 259.35 39.665 A 28.648 28.648 0 0 1 261.3 33.1 A 21.228 21.228 0 0 1 265.141 27.147 A 19.231 19.231 0 0 1 268.6 24.2 A 18.792 18.792 0 0 1 275.953 21.345 A 25.194 25.194 0 0 1 280.2 21 Q 283.5 21 286.75 21.8 A 26.164 26.164 0 0 1 293.003 24.248 A 28.973 28.973 0 0 1 293.1 24.3 Z M 347.6 47 L 346.8 47 L 346.8 38.5 L 346.8 38.3 Q 346.8 35.4 349.55 33.15 Q 352.3 30.9 355.2 28.8 Q 358.6 26.3 361.05 22.8 A 13.312 13.312 0 0 0 363.211 17.518 A 18.213 18.213 0 0 0 363.5 14.2 A 13.74 13.74 0 0 0 363.05 10.609 A 11.062 11.062 0 0 0 361.45 7.15 Q 359.4 4.2 356 2.6 Q 352.6 1 348.7 1 A 20.689 20.689 0 0 0 345.689 1.209 A 15.096 15.096 0 0 0 342.7 1.95 Q 340.306 2.825 338.633 3.997 A 12.383 12.383 0 0 0 338.35 4.2 A 40.106 40.106 0 0 0 337.335 4.979 Q 336.337 5.771 335.693 6.408 A 11.559 11.559 0 0 0 335.65 6.45 A 19.818 19.818 0 0 1 335.333 6.761 Q 334.664 7.4 334.5 7.4 Q 334.252 7.4 334.004 7.195 A 1.492 1.492 0 0 1 333.9 7.1 L 333.6 6.8 A 21.312 21.312 0 0 1 338.562 2.748 A 25.113 25.113 0 0 1 340 1.95 A 17.588 17.588 0 0 1 345.745 0.191 A 22.281 22.281 0 0 1 348.7 0 Q 352.9 0 356.55 1.7 Q 360.2 3.4 362.45 6.6 A 12.343 12.343 0 0 1 364.6 12.398 A 15.849 15.849 0 0 1 364.7 14.2 A 18.766 18.766 0 0 1 364.273 18.303 A 13.824 13.824 0 0 1 362.3 23 Q 359.9 26.6 356.5 29.2 Q 354.6 30.6 352.6 32.1 A 25.376 25.376 0 0 0 350.879 33.507 Q 350.102 34.204 349.476 34.901 A 15.244 15.244 0 0 0 349.3 35.1 A 5.963 5.963 0 0 0 348.301 36.675 A 5.109 5.109 0 0 0 347.9 38.4 L 347.6 47 Z M 70.312 21.549 A 25.344 25.344 0 0 0 64.9 21 A 25.6 25.6 0 0 0 59.775 21.489 A 18.258 18.258 0 0 0 53.15 24.2 A 18.971 18.971 0 0 0 49.641 27.246 A 21.124 21.124 0 0 0 45.95 33.1 A 29.088 29.088 0 0 0 44.039 39.665 A 39.023 39.023 0 0 0 43.5 46.3 A 39.055 39.055 0 0 0 43.905 52.032 A 29.565 29.565 0 0 0 45.95 59.4 A 23.509 23.509 0 0 0 46.472 60.532 A 19.184 19.184 0 0 0 53.2 68.25 A 18.564 18.564 0 0 0 59.358 70.819 A 25.143 25.143 0 0 0 64.9 71.4 Q 71.9 71.4 76.65 68.25 A 18.759 18.759 0 0 0 80.13 65.279 A 20.782 20.782 0 0 0 83.85 59.45 A 28.628 28.628 0 0 0 85.767 52.899 A 38.856 38.856 0 0 0 86.3 46.3 A 39.789 39.789 0 0 0 85.797 39.813 A 28.703 28.703 0 0 0 83.85 33.05 A 23.87 23.87 0 0 0 83.371 32.013 A 19.688 19.688 0 0 0 76.65 24.2 A 18.153 18.153 0 0 0 70.312 21.549 Z M 64.9 70.4 A 24.118 24.118 0 0 0 70.985 69.679 A 16.07 16.07 0 0 0 80.05 63.7 A 23.989 23.989 0 0 0 84.134 54.897 Q 85.1 50.982 85.1 46.3 A 39.235 39.235 0 0 0 84.606 39.924 A 29.171 29.171 0 0 0 82.85 33.6 A 20.164 20.164 0 0 0 79.758 28.35 A 17.465 17.465 0 0 0 76.15 25.05 A 16.761 16.761 0 0 0 70.31 22.564 Q 68.017 22.044 65.354 22.004 A 29.798 29.798 0 0 0 64.9 22 A 24.328 24.328 0 0 0 59.82 22.504 A 17.171 17.171 0 0 0 53.7 25.05 A 18.048 18.048 0 0 0 47.628 32.102 A 22.353 22.353 0 0 0 46.95 33.6 A 29.41 29.41 0 0 0 45.131 40.326 A 39.642 39.642 0 0 0 44.7 46.3 A 36.661 36.661 0 0 0 45.418 53.763 Q 46.389 58.435 48.675 62.075 A 22.001 22.001 0 0 0 49.8 63.7 A 16.504 16.504 0 0 0 60.413 70.02 A 25.223 25.223 0 0 0 64.9 70.4 Z M 212.3 41.7 L 249.5 41.7 A 28.194 28.194 0 0 0 248.913 35.772 Q 247.83 30.737 244.75 27.3 Q 240 22 232.3 22 A 22.713 22.713 0 0 0 226.087 22.808 A 17.104 17.104 0 0 0 218.35 27.4 A 20.856 20.856 0 0 0 213.235 36.48 A 28.865 28.865 0 0 0 212.3 41.7 Z M 33.2 33.6 L 32.9 24.3 L 34.3 24.9 L 34.3 34.3 L 33.7 34.3 A 0.322 0.322 0 0 1 33.497 34.226 Q 33.448 34.187 33.403 34.128 A 0.84 0.84 0 0 1 33.35 34.05 A 1.34 1.34 0 0 1 33.267 33.888 Q 33.23 33.802 33.214 33.723 A 0.606 0.606 0 0 1 33.2 33.6 Z M 292 33.6 L 291.7 24.3 L 293.1 24.9 L 293.1 34.3 L 292.5 34.3 A 0.322 0.322 0 0 1 292.297 34.226 Q 292.248 34.187 292.203 34.128 A 0.84 0.84 0 0 1 292.15 34.05 A 1.34 1.34 0 0 1 292.067 33.888 Q 292.03 33.802 292.014 33.723 A 0.606 0.606 0 0 1 292 33.6 Z M 344.48 70.68 A 3.069 3.069 0 0 0 346.7 71.6 A 4.094 4.094 0 0 0 346.744 71.6 A 3.185 3.185 0 0 0 349.05 70.65 A 3.901 3.901 0 0 0 349.08 70.621 A 3.069 3.069 0 0 0 350 68.4 A 4.094 4.094 0 0 0 350 68.357 A 3.185 3.185 0 0 0 349.05 66.05 A 3.184 3.184 0 0 0 348.006 65.345 A 3.397 3.397 0 0 0 346.7 65.1 A 3.1 3.1 0 0 0 345.558 65.309 A 3.232 3.232 0 0 0 344.45 66.05 A 3.184 3.184 0 0 0 343.745 67.095 A 3.397 3.397 0 0 0 343.5 68.4 A 3.1 3.1 0 0 0 343.709 69.543 A 3.232 3.232 0 0 0 344.45 70.65 A 3.901 3.901 0 0 0 344.48 70.68 Z M 102 70.8 L 93.5 70.8 L 93.5 70.3 A 0.322 0.322 0 0 1 93.575 70.097 Q 93.614 70.048 93.673 70.003 A 0.84 0.84 0 0 1 93.75 69.95 A 1.34 1.34 0 0 1 93.913 69.867 Q 93.999 69.83 94.078 69.814 A 0.606 0.606 0 0 1 94.2 69.8 L 101.9 69.6 L 102 70.8 Z M 160.2 70.8 L 151.7 70.8 L 151.7 70.3 A 0.322 0.322 0 0 1 151.775 70.097 Q 151.814 70.048 151.873 70.003 A 0.84 0.84 0 0 1 151.95 69.95 A 1.34 1.34 0 0 1 152.113 69.867 Q 152.199 69.83 152.278 69.814 A 0.606 0.606 0 0 1 152.4 69.8 L 160.1 69.6 L 160.2 70.8 Z M 111.1 70.8 L 102.6 70.8 L 102.7 69.6 L 110.4 69.8 Q 110.555 69.8 110.74 69.89 A 1.436 1.436 0 0 1 110.85 69.95 A 0.768 0.768 0 0 1 110.964 70.032 Q 111.1 70.153 111.1 70.3 L 111.1 70.8 Z M 169.3 70.8 L 160.8 70.8 L 160.9 69.6 L 168.6 69.8 Q 168.755 69.8 168.94 69.89 A 1.436 1.436 0 0 1 169.05 69.95 A 0.768 0.768 0 0 1 169.164 70.032 Q 169.3 70.153 169.3 70.3 L 169.3 70.8 Z M 146.4 70.8 L 137.9 70.8 L 138 69.6 L 145.7 69.8 Q 145.855 69.8 146.04 69.89 A 1.436 1.436 0 0 1 146.15 69.95 A 0.768 0.768 0 0 1 146.264 70.032 Q 146.4 70.153 146.4 70.3 L 146.4 70.8 Z M 204.6 70.8 L 196.1 70.8 L 196.2 69.6 L 203.9 69.8 Q 204.055 69.8 204.24 69.89 A 1.436 1.436 0 0 1 204.35 69.95 A 0.768 0.768 0 0 1 204.464 70.032 Q 204.6 70.153 204.6 70.3 L 204.6 70.8 Z"
					stroke="green"
					strokeWidth="2"
					fill="transparent"
					initial={{ pathLength: 0, pathOffset: 1 }}
					animate={connectInView ? { pathLength: 1, pathOffset: 0 } : {}}
					transition={{ duration: 2, ease: "easeInOut" }}
				/>
			</motion.svg>
			<form
				id="form"
				className="flex w-full flex-col gap-2"
				ref={form}
				onSubmit={sendEmail}
			>
				<input
					className="p-2  border-b  outline-none"
					id="name"
					type="text"
					required
					placeholder="Name"
				/>

				<input
					className="p-2 border-b  outline-none"
					id="email"
					type="email"
					required
					placeholder="Email"
				/>

				<textarea
					required
					className="p-2 border  outline-none"
					id="message"
					name="message"
					placeholder="message"
				/>
				<button className=" p-2 bg-gradient-to-r from-yellow-400 to-gray-400 bg-[length:200%_100%] bg-right hover:bg-left hover:animate-bg-move transition-all duration-100 ">
					SUBMIT
				</button>
			</form>
		</section>
	);
};
